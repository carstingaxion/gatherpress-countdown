{"version":3,"file":"view.js","mappings":"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","sources":["webpack://gatherpress-countdown/./src/view.js"],"sourcesContent":["/* eslint-env browser */\n/**\n * Frontend countdown timer functionality with performance optimizations.\n *\n * Handles real-time countdown/countup updates on the frontend using:\n * - IntersectionObserver to pause timers when off-screen\n * - RequestAnimationFrame for optimal rendering\n * - will-change CSS for GPU acceleration\n *\n * @package\n */\n\n( function () {\n\t'use strict';\n\n\t/**\n\t * Time unit conversion constants in seconds.\n\t *\n\t * @type {Object.<string, number>}\n\t */\n\tconst TIME_UNITS = {\n\t\tyears: 365.25 * 24 * 60 * 60,\n\t\tmonths: 30.44 * 24 * 60 * 60,\n\t\tweeks: 7 * 24 * 60 * 60,\n\t\tdays: 24 * 60 * 60,\n\t\thours: 60 * 60,\n\t\tminutes: 60,\n\t\tseconds: 1,\n\t};\n\n\t/**\n\t * Order of time segments from largest to smallest.\n\t *\n\t * @type {string[]}\n\t */\n\tconst SEGMENT_ORDER = [\n\t\t'years',\n\t\t'months',\n\t\t'weeks',\n\t\t'days',\n\t\t'hours',\n\t\t'minutes',\n\t\t'seconds',\n\t];\n\n\t/**\n\t * Timer state manager.\n\t *\n\t * @type {Object}\n\t */\n\tconst timerState = {\n\t\tintervalId: null,\n\t\tvisibleTimers: new Set(),\n\t\tallTimers: new Set(),\n\t\tobserver: null,\n\t};\n\n\t/**\n\t * Get label for time segment with singular/plural support.\n\t *\n\t * @param {string} type  - Segment type (years, months, etc).\n\t * @param {number} value - Segment value.\n\t * @return {string} Translated label.\n\t */\n\tfunction getSegmentLabel( type, value ) {\n\t\tconst labelMap = {\n\t\t\tyears: { singular: 'Year', plural: 'Years' },\n\t\t\tmonths: { singular: 'Month', plural: 'Months' },\n\t\t\tweeks: { singular: 'Week', plural: 'Weeks' },\n\t\t\tdays: { singular: 'Day', plural: 'Days' },\n\t\t\thours: { singular: 'Hour', plural: 'Hours' },\n\t\t\tminutes: { singular: 'Minute', plural: 'Minutes' },\n\t\t\tseconds: { singular: 'Second', plural: 'Seconds' },\n\t\t};\n\n\t\tif ( ! labelMap[ type ] ) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif ( value === 1 ) {\n\t\t\treturn labelMap[ type ].singular;\n\t\t}\n\n\t\treturn labelMap[ type ].plural;\n\t}\n\n\t/**\n\t * Calculate time difference with cascading based on selected segments.\n\t *\n\t * @param {string} targetDateTime - The target date/time in ISO format.\n\t * @param {Object} segments       - Object indicating which segments are shown.\n\t * @return {Object} Object containing calculated time values.\n\t */\n\tfunction calculateTimeDifference( targetDateTime, segments ) {\n\t\tconst now = new Date().getTime();\n\t\tconst target = new Date( targetDateTime ).getTime();\n\t\tconst difference = target - now;\n\t\tconst absDifference = Math.abs( difference );\n\n\t\tlet remainingSeconds = Math.floor( absDifference / 1000 );\n\t\tconst result = { total: difference };\n\n\t\t// Calculate each segment in order, subtracting from remainingSeconds\n\t\tSEGMENT_ORDER.forEach( function ( segment ) {\n\t\t\tif ( segments[ segment ] ) {\n\t\t\t\tresult[ segment ] = Math.floor(\n\t\t\t\t\tremainingSeconds / TIME_UNITS[ segment ]\n\t\t\t\t);\n\t\t\t\tremainingSeconds -= result[ segment ] * TIME_UNITS[ segment ];\n\t\t\t} else {\n\t\t\t\tresult[ segment ] = 0;\n\t\t\t}\n\t\t} );\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Format number with leading zero.\n\t *\n\t * @param {number} num - The number to format.\n\t * @return {string} Formatted number string.\n\t */\n\tfunction formatNumber( num ) {\n\t\treturn num.toString().padStart( 2, '0' );\n\t}\n\n\t/**\n\t * Get segment configuration from timer element dataset.\n\t *\n\t * @param {HTMLElement} timerElement - The countdown timer DOM element.\n\t * @return {Object} Segment configuration object.\n\t */\n\tfunction getSegmentConfig( timerElement ) {\n\t\treturn {\n\t\t\tyears: timerElement.dataset.showYears === '1',\n\t\t\tmonths: timerElement.dataset.showMonths === '1',\n\t\t\tweeks: timerElement.dataset.showWeeks === '1',\n\t\t\tdays: timerElement.dataset.showDays === '1',\n\t\t\thours: timerElement.dataset.showHours === '1',\n\t\t\tminutes: timerElement.dataset.showMinutes === '1',\n\t\t\tseconds: timerElement.dataset.showSeconds === '1',\n\t\t};\n\t}\n\n\t/**\n\t * Get enabled segments in order.\n\t *\n\t * @param {Object} segmentConfig - Segment configuration object.\n\t * @return {string[]} Array of enabled segment names.\n\t */\n\tfunction getEnabledSegments( segmentConfig ) {\n\t\treturn SEGMENT_ORDER.filter( function ( segment ) {\n\t\t\treturn segmentConfig[ segment ];\n\t\t} );\n\t}\n\n\t/**\n\t * Update a single countdown timer element.\n\t *\n\t * @param {HTMLElement} timerElement - The countdown timer DOM element.\n\t * @return {void}\n\t */\n\tfunction updateTimer( timerElement ) {\n\t\tconst targetDateTime = timerElement.dataset.target;\n\t\tif ( ! targetDateTime ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst segmentElements = timerElement.querySelectorAll(\n\t\t\t'.gatherpress-countdown__segment'\n\t\t);\n\n\t\tif ( segmentElements.length === 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst segmentConfig = getSegmentConfig( timerElement );\n\t\tconst enabledSegments = getEnabledSegments( segmentConfig );\n\t\tconst timeLeft = calculateTimeDifference(\n\t\t\ttargetDateTime,\n\t\t\tsegmentConfig\n\t\t);\n\t\tconst values = enabledSegments.map( function ( segment ) {\n\t\t\treturn timeLeft[ segment ];\n\t\t} );\n\n\t\t// Find the first non-zero segment from the start\n\t\tlet firstNonZeroIndex = -1;\n\t\tfor ( let i = 0; i < values.length; i++ ) {\n\t\t\tif ( values[ i ] > 0 ) {\n\t\t\t\tfirstNonZeroIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// Use requestAnimationFrame for smooth updates\n\t\trequestAnimationFrame( function () {\n\t\t\tsegmentElements.forEach( function ( segment, index ) {\n\t\t\t\tif ( index >= values.length ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst segmentType = enabledSegments[ index ];\n\t\t\t\tconst value = values[ index ];\n\t\t\t\tconst numberElement = segment.querySelector(\n\t\t\t\t\t'.gatherpress-countdown__number'\n\t\t\t\t);\n\t\t\t\tconst labelElement = segment.querySelector(\n\t\t\t\t\t'.gatherpress-countdown__label'\n\t\t\t\t);\n\n\t\t\t\t// Update number\n\t\t\t\tif ( numberElement ) {\n\t\t\t\t\tconst newValue = formatNumber( value );\n\t\t\t\t\tif ( numberElement.textContent !== newValue ) {\n\t\t\t\t\t\tnumberElement.textContent = newValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Update label with singular/plural form\n\t\t\t\tif ( labelElement ) {\n\t\t\t\t\tconst newLabel = getSegmentLabel( segmentType, value );\n\t\t\t\t\tif ( labelElement.textContent !== newLabel ) {\n\t\t\t\t\t\tlabelElement.textContent = newLabel;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Handle visibility\n\t\t\t\tconst shouldHide =\n\t\t\t\t\tfirstNonZeroIndex !== -1 &&\n\t\t\t\t\tindex < firstNonZeroIndex &&\n\t\t\t\t\tvalue === 0;\n\t\t\t\tconst isCurrentlyHidden = segment.style.display === 'none';\n\n\t\t\t\tif ( shouldHide && ! isCurrentlyHidden ) {\n\t\t\t\t\tsegment.style.display = 'none';\n\t\t\t\t} else if ( ! shouldHide && isCurrentlyHidden ) {\n\t\t\t\t\tsegment.style.display = '';\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\n\t\t// Update mode attribute if needed\n\t\tconst newMode = timeLeft.total < 0 ? 'countup' : 'countdown';\n\t\tif ( timerElement.dataset.mode !== newMode ) {\n\t\t\ttimerElement.dataset.mode = newMode;\n\t\t}\n\t}\n\n\t/**\n\t * Update all visible timers.\n\t *\n\t * Only updates timers that are currently in the viewport.\n\t *\n\t * @return {void}\n\t */\n\tfunction updateVisibleTimers() {\n\t\tif ( timerState.visibleTimers.size === 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\ttimerState.visibleTimers.forEach( function ( timer ) {\n\t\t\tupdateTimer( timer );\n\t\t} );\n\t}\n\n\t/**\n\t * Start the update interval.\n\t *\n\t * @return {void}\n\t */\n\tfunction startInterval() {\n\t\tif ( timerState.intervalId ) {\n\t\t\treturn;\n\t\t}\n\n\t\tupdateVisibleTimers();\n\t\ttimerState.intervalId = setInterval( updateVisibleTimers, 1000 );\n\t}\n\n\t/**\n\t * Stop the update interval.\n\t *\n\t * @return {void}\n\t */\n\tfunction stopInterval() {\n\t\tif ( timerState.intervalId ) {\n\t\t\tclearInterval( timerState.intervalId );\n\t\t\ttimerState.intervalId = null;\n\t\t}\n\t}\n\n\t/**\n\t * Handle intersection observer entries.\n\t *\n\t * @param {IntersectionObserverEntry[]} entries - Observer entries.\n\t * @return {void}\n\t */\n\tfunction handleIntersection( entries ) {\n\t\tentries.forEach( function ( entry ) {\n\t\t\tif ( entry.isIntersecting ) {\n\t\t\t\t// Timer entered viewport\n\t\t\t\ttimerState.visibleTimers.add( entry.target );\n\t\t\t\t// Immediately update the timer\n\t\t\t\tupdateTimer( entry.target );\n\n\t\t\t\t// Start interval if this is the first visible timer\n\t\t\t\tif ( timerState.visibleTimers.size === 1 ) {\n\t\t\t\t\tstartInterval();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Timer left viewport\n\t\t\t\ttimerState.visibleTimers.delete( entry.target );\n\n\t\t\t\t// Stop interval if no timers are visible\n\t\t\t\tif ( timerState.visibleTimers.size === 0 ) {\n\t\t\t\t\tstopInterval();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Initialize IntersectionObserver for performance optimization.\n\t *\n\t * @return {void}\n\t */\n\tfunction initIntersectionObserver() {\n\t\t// Check if IntersectionObserver is supported\n\t\tif ( ! ( 'IntersectionObserver' in window ) ) {\n\t\t\t// Fallback: observe all timers\n\t\t\ttimerState.allTimers.forEach( function ( timer ) {\n\t\t\t\ttimerState.visibleTimers.add( timer );\n\t\t\t} );\n\t\t\tstartInterval();\n\t\t\treturn;\n\t\t}\n\n\t\t// Create observer with a small root margin to preload timers slightly before they enter viewport\n\t\ttimerState.observer = new IntersectionObserver( handleIntersection, {\n\t\t\trootMargin: '50px',\n\t\t\tthreshold: 0,\n\t\t} );\n\n\t\t// Observe all timers\n\t\ttimerState.allTimers.forEach( function ( timer ) {\n\t\t\ttimerState.observer.observe( timer );\n\t\t} );\n\t}\n\n\t/**\n\t * Initialize countdown timers on the page.\n\t *\n\t * Sets up IntersectionObserver and interval to update countdown timers.\n\t *\n\t * @return {void}\n\t */\n\tfunction initCountdownTimers() {\n\t\tconst timers = document.querySelectorAll( '.gatherpress-countdown' );\n\n\t\tif ( timers.length === 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Store all timers\n\t\ttimers.forEach( function ( timer ) {\n\t\t\ttimerState.allTimers.add( timer );\n\t\t} );\n\n\t\t// Initialize intersection observer for performance\n\t\tinitIntersectionObserver();\n\t}\n\n\t/**\n\t * Clean up resources on page unload.\n\t *\n\t * @return {void}\n\t */\n\tfunction cleanup() {\n\t\tstopInterval();\n\n\t\tif ( timerState.observer ) {\n\t\t\ttimerState.observer.disconnect();\n\t\t\ttimerState.observer = null;\n\t\t}\n\n\t\ttimerState.visibleTimers.clear();\n\t\ttimerState.allTimers.clear();\n\t}\n\n\t// Initialize when DOM is ready\n\tif ( document.readyState === 'loading' ) {\n\t\tdocument.addEventListener( 'DOMContentLoaded', initCountdownTimers );\n\t} else {\n\t\tinitCountdownTimers();\n\t}\n\n\t// Clean up on page unload\n\twindow.addEventListener( 'beforeunload', cleanup );\n\n\t// Handle visibility change to pause/resume timers\n\tdocument.addEventListener( 'visibilitychange', function () {\n\t\tif ( document.hidden ) {\n\t\t\tstopInterval();\n\t\t} else if ( timerState.visibleTimers.size > 0 ) {\n\t\t\tstartInterval();\n\t\t}\n\t} );\n} )();\n"],"names":["TIME_UNITS","years","months","weeks","days","hours","minutes","seconds","SEGMENT_ORDER","timerState","intervalId","visibleTimers","Set","allTimers","observer","getSegmentLabel","type","value","labelMap","singular","plural","calculateTimeDifference","targetDateTime","segments","now","Date","getTime","target","difference","absDifference","Math","abs","remainingSeconds","floor","result","total","forEach","segment","formatNumber","num","toString","padStart","getSegmentConfig","timerElement","dataset","showYears","showMonths","showWeeks","showDays","showHours","showMinutes","showSeconds","getEnabledSegments","segmentConfig","filter","updateTimer","segmentElements","querySelectorAll","length","enabledSegments","timeLeft","values","map","firstNonZeroIndex","i","requestAnimationFrame","index","segmentType","numberElement","querySelector","labelElement","newValue","textContent","newLabel","shouldHide","isCurrentlyHidden","style","display","newMode","mode","updateVisibleTimers","size","timer","startInterval","setInterval","stopInterval","clearInterval","handleIntersection","entries","entry","isIntersecting","add","delete","initIntersectionObserver","window","IntersectionObserver","rootMargin","threshold","observe","initCountdownTimers","timers","document","cleanup","disconnect","clear","readyState","addEventListener","hidden"],"ignoreList":[],"sourceRoot":""}