{"version":3,"file":"view.js","mappings":"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","sources":["webpack://block-gatherpress-countdown/./src/view.js"],"sourcesContent":["/**\n * Frontend countdown timer functionality.\n *\n * Handles real-time countdown/countup updates on the frontend.\n * Updates all countdown timer blocks on the page every second.\n *\n * @package TelexCountdownTimer\n */\n\n( function() {\n\t'use strict';\n\n\t/**\n\t * Calculate time difference with cascading based on selected segments.\n\t *\n\t * @param {string} targetDateTime - The target date/time in ISO format.\n\t * @param {Object} segments - Object indicating which segments are shown.\n\t * @return {Object} Object containing calculated time values.\n\t */\n\tfunction calculateTimeDifference( targetDateTime, segments ) {\n\t\tconst now = new Date().getTime();\n\t\tconst target = new Date( targetDateTime ).getTime();\n\t\tconst difference = target - now;\n\t\tconst absDifference = Math.abs( difference );\n\n\t\t// Calculate remaining time in seconds\n\t\tlet remainingSeconds = Math.floor( absDifference / 1000 );\n\n\t\t// Initialize result object\n\t\tconst result = {\n\t\t\tyears: 0,\n\t\t\tmonths: 0,\n\t\t\tweeks: 0,\n\t\t\tdays: 0,\n\t\t\thours: 0,\n\t\t\tminutes: 0,\n\t\t\tseconds: 0,\n\t\t\ttotal: difference,\n\t\t};\n\n\t\t// Calculate each segment, subtracting from remainingSeconds as we go\n\t\tif ( segments.showYears ) {\n\t\t\tconst secondsPerYear = 365.25 * 24 * 60 * 60;\n\t\t\tresult.years = Math.floor( remainingSeconds / secondsPerYear );\n\t\t\tremainingSeconds -= result.years * secondsPerYear;\n\t\t}\n\n\t\tif ( segments.showMonths ) {\n\t\t\tconst secondsPerMonth = 30.44 * 24 * 60 * 60;\n\t\t\tresult.months = Math.floor( remainingSeconds / secondsPerMonth );\n\t\t\tremainingSeconds -= result.months * secondsPerMonth;\n\t\t}\n\n\t\tif ( segments.showWeeks ) {\n\t\t\tconst secondsPerWeek = 7 * 24 * 60 * 60;\n\t\t\tresult.weeks = Math.floor( remainingSeconds / secondsPerWeek );\n\t\t\tremainingSeconds -= result.weeks * secondsPerWeek;\n\t\t}\n\n\t\tif ( segments.showDays ) {\n\t\t\tconst secondsPerDay = 24 * 60 * 60;\n\t\t\tresult.days = Math.floor( remainingSeconds / secondsPerDay );\n\t\t\tremainingSeconds -= result.days * secondsPerDay;\n\t\t}\n\n\t\tif ( segments.showHours ) {\n\t\t\tconst secondsPerHour = 60 * 60;\n\t\t\tresult.hours = Math.floor( remainingSeconds / secondsPerHour );\n\t\t\tremainingSeconds -= result.hours * secondsPerHour;\n\t\t}\n\n\t\tif ( segments.showMinutes ) {\n\t\t\tconst secondsPerMinute = 60;\n\t\t\tresult.minutes = Math.floor( remainingSeconds / secondsPerMinute );\n\t\t\tremainingSeconds -= result.minutes * secondsPerMinute;\n\t\t}\n\n\t\tif ( segments.showSeconds ) {\n\t\t\tresult.seconds = Math.floor( remainingSeconds );\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Format number with leading zero.\n\t *\n\t * @param {number} num - The number to format.\n\t * @return {string} Formatted number string.\n\t */\n\tfunction formatNumber( num ) {\n\t\treturn num.toString().padStart( 2, '0' );\n\t}\n\n\t/**\n\t * Update a single countdown timer element.\n\t *\n\t * @param {HTMLElement} timerElement - The countdown timer DOM element.\n\t * @return {void}\n\t */\n\tfunction updateTimer( timerElement ) {\n\t\tconst targetDateTime = timerElement.dataset.target;\n\t\tif ( ! targetDateTime ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst segments = {\n\t\t\tshowYears: timerElement.dataset.showYears === '1',\n\t\t\tshowMonths: timerElement.dataset.showMonths === '1',\n\t\t\tshowWeeks: timerElement.dataset.showWeeks === '1',\n\t\t\tshowDays: timerElement.dataset.showDays === '1',\n\t\t\tshowHours: timerElement.dataset.showHours === '1',\n\t\t\tshowMinutes: timerElement.dataset.showMinutes === '1',\n\t\t\tshowSeconds: timerElement.dataset.showSeconds === '1'\n\t\t};\n\n\t\tconst timeLeft = calculateTimeDifference( targetDateTime, segments );\n\t\tconst segmentElements = timerElement.querySelectorAll( '.gatherpress-countdown-segment' );\n\n\t\tif ( segmentElements.length === 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst values = [];\n\t\tconst segmentTypes = [];\n\t\t\n\t\tif ( segments.showYears ) {\n\t\t\tvalues.push( timeLeft.years );\n\t\t\tsegmentTypes.push( 'years' );\n\t\t}\n\t\tif ( segments.showMonths ) {\n\t\t\tvalues.push( timeLeft.months );\n\t\t\tsegmentTypes.push( 'months' );\n\t\t}\n\t\tif ( segments.showWeeks ) {\n\t\t\tvalues.push( timeLeft.weeks );\n\t\t\tsegmentTypes.push( 'weeks' );\n\t\t}\n\t\tif ( segments.showDays ) {\n\t\t\tvalues.push( timeLeft.days );\n\t\t\tsegmentTypes.push( 'days' );\n\t\t}\n\t\tif ( segments.showHours ) {\n\t\t\tvalues.push( timeLeft.hours );\n\t\t\tsegmentTypes.push( 'hours' );\n\t\t}\n\t\tif ( segments.showMinutes ) {\n\t\t\tvalues.push( timeLeft.minutes );\n\t\t\tsegmentTypes.push( 'minutes' );\n\t\t}\n\t\tif ( segments.showSeconds ) {\n\t\t\tvalues.push( timeLeft.seconds );\n\t\t\tsegmentTypes.push( 'seconds' );\n\t\t}\n\t\t\n\t\t// Find the first non-zero segment from the start\n\t\tlet firstNonZeroIndex = -1;\n\t\tfor ( let i = 0; i < values.length; i++ ) {\n\t\t\tif ( values[ i ] > 0 ) {\n\t\t\t\tfirstNonZeroIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\tsegmentElements.forEach( ( segment, index ) => {\n\t\t\tif ( index >= values.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tconst value = values[ index ];\n\t\t\tconst numberElement = segment.querySelector( '.gatherpress-countdown-number' );\n\t\t\t\n\t\t\tif ( numberElement ) {\n\t\t\t\tnumberElement.textContent = formatNumber( value );\n\t\t\t}\n\t\t\t\n\t\t\t// Only hide segments that come BEFORE the first non-zero segment\n\t\t\t// This ensures in-between zero values are never hidden\n\t\t\tif ( firstNonZeroIndex !== -1 && index < firstNonZeroIndex && value === 0 ) {\n\t\t\t\tsegment.style.display = 'none';\n\t\t\t} else {\n\t\t\t\tsegment.style.display = '';\n\t\t\t}\n\t\t} );\n\n\t\t// Update mode attribute if needed.\n\t\tconst newMode = timeLeft.total < 0 ? 'countup' : 'countdown';\n\t\tif ( timerElement.dataset.mode !== newMode ) {\n\t\t\ttimerElement.dataset.mode = newMode;\n\t\t}\n\t}\n\n\t/**\n\t * Initialize countdown timers on the page.\n\t *\n\t * Sets up interval to update all countdown timers every second.\n\t *\n\t * @return {void}\n\t */\n\tfunction initCountdownTimers() {\n\t\tconst timers = document.querySelectorAll( '.gatherpress-countdown' );\n\t\t\n\t\tif ( timers.length === 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Initial update.\n\t\ttimers.forEach( updateTimer );\n\n\t\t// Update every second.\n\t\tsetInterval( function() {\n\t\t\ttimers.forEach( updateTimer );\n\t\t}, 1000 );\n\t}\n\n\t// Initialize when DOM is ready.\n\tif ( document.readyState === 'loading' ) {\n\t\tdocument.addEventListener( 'DOMContentLoaded', initCountdownTimers );\n\t} else {\n\t\tinitCountdownTimers();\n\t}\n}() );\n"],"names":["calculateTimeDifference","targetDateTime","segments","now","Date","getTime","target","difference","absDifference","Math","abs","remainingSeconds","floor","result","years","months","weeks","days","hours","minutes","seconds","total","showYears","secondsPerYear","showMonths","secondsPerMonth","showWeeks","secondsPerWeek","showDays","secondsPerDay","showHours","secondsPerHour","showMinutes","secondsPerMinute","showSeconds","formatNumber","num","toString","padStart","updateTimer","timerElement","dataset","timeLeft","segmentElements","querySelectorAll","length","values","segmentTypes","push","firstNonZeroIndex","i","forEach","segment","index","value","numberElement","querySelector","textContent","style","display","newMode","mode","initCountdownTimers","timers","document","setInterval","readyState","addEventListener"],"ignoreList":[],"sourceRoot":""}